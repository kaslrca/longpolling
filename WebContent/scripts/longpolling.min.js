var env=angular.module("env",[]);env.constant("env",{ip:"http://10.1.100.76:88",ws:"ws://10.1.100.76:89/websocket"});env.constant("action",{send:"send",saveName:"saveName",listener:"listener"});env.constant("index",Math.floor((Math.random()*999)+1));var newDirective=angular.module("directive",[]);newDirective.directive("ngEnter",function(){return function(c,b,a){b.bind("keydown keypress",function(d){if(d.which===13){c.$apply(function(){c.$eval(a.ngEnter)});d.preventDefault()}})}});var messageService=angular.module("longpolling.services",[]);function service(b,d,a){var c="";this.sendMessage=function(e){$.ajax({url:b.ip+"/"+d.send+"/"+a,type:"POST",data:e})};this.saveName=function(e){c=e;$.ajax({url:b.ip+"/"+d.saveName+"/"+a+"/"+e,type:"GET"})};this.listen=function(e){$.get(b.ip+"/"+d.listener+"/"+a,null,e)};this.getUserName=function(){return c}}messageService.service("service",["env","action","index",service]);var messageControllers=angular.module("longpolling.controllers",[]);messageControllers.controller("messageCtrl",["$scope","env","action","service",function(b,c,d,a){b.name=a.getUserName();b.msg="";b.send=function(){a.sendMessage(b.msg);b.msg=""}}]).controller("loginCtrl",["$scope","env","action","service","$state",function(b,d,e,a,c){b.name="";b.saveName=function(){a.saveName(b.name);c.go("chart")}}]);var modules=["ui.router","ngAnimate","env","longpolling.controllers","longpolling.services","directive"];var myApp=angular.module("longpolling.module",modules);myApp.config(["$stateProvider","$urlRouterProvider","$locationProvider",function(c,a,b){c.state("login",{url:"/",views:{master:{controller:"loginCtrl",templateUrl:"login.html"}}}).state("chart",{url:"/chart",views:{master:{templateUrl:"chart.html"},"board@chart":{templateUrl:"context.html"},"keyIn@chart":{controller:"messageCtrl",templateUrl:"KeyIn.html"}}})}]);